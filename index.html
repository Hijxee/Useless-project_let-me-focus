<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Procrasti-Timer</title>
    <link rel="stylesheet" href="css/styles.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        /* --- 1. General Styling & CSS Variables --- */
        
    </style>
</head>
<body>

    <header>
        <div class="logo">‚è≥ Procrasti-Timer</div>
        <nav>
            <ul>
                <li><a href="#">Our Philosophy</a></li>
                <li><a href="#">Productivity Science</a></li>
                <li><a href="#">Pricing</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <div id="setup">
            <h1>Achieve Deep Work. Effortlessly.</h1>
            <p class="sub-headline">Reclaim your focus with our scientifically-designed distraction-blocking workflow.</p>
            <div class="timer-input">
                <label for="minutes-input">Set Focus Time (in minutes):</label>
                <input type="number" id="minutes-input" value="25" min="1">
            </div>
            <button id="startBtn">START FOCUSING</button>
        </div>

        <div id="timer-container" class="hidden">
            <div id="countdown">00:00</div>
            <p id="message"></p>
        </div>
    </main>
    
    <audio id="alarm-sound" src="https://www.soundjay.com/buttons/sounds/button-16.mp3" preload="auto"></audio>


    <script>
        // --- 1. GET DOM ELEMENTS ---
        const setupDiv = document.getElementById('setup');
        const timerContainerDiv = document.getElementById('timer-container');
        const startBtn = document.getElementById('startBtn');
        const minutesInput = document.getElementById('minutes-input');
        const countdownDisplay = document.getElementById('countdown');
        const messageDisplay = document.getElementById('message');
        const alarmSound = document.getElementById('alarm-sound');

        // --- 2. GLOBAL VARIABLES ---
        let timerInterval; // Will hold the setInterval function
        let totalSeconds;
        let originalMinutes;

        // The heart of the sabotage!
        const distractionUrls = [
          'https://www.youtube.com/watch?v=dQw4w9WgXcQ', // A classic
          'https://en.wikipedia.org/wiki/Special:Random',
          'https://pointerpointer.com/',
          'https://theuselessweb.com/',
          'https://neal.fun/deep-sea/',
          'https://cat-bounce.com/',
          'https://longdogechallenge.com/'
        ];

        // --- 3. TIMER LOGIC ---
        function updateTimer() {
            // Calculate minutes and seconds from totalSeconds
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            
            // Format time with leading zeros
            countdownDisplay.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            
            // Update motivational message based on progress
            updateMessage();

            // Check if the timer has finished
            if (totalSeconds <= 0) {
                clearInterval(timerInterval);
                countdownDisplay.textContent = "STOP!";
                alarmSound.play();
                
                // Open a random distracting website
                const randomIndex = Math.floor(Math.random() * distractionUrls.length);
                window.open(distractionUrls[randomIndex], '_blank');

                // Reset the UI after a short delay
                setTimeout(resetUI, 2000);
            } else {
                totalSeconds--;
            }
        }
        
        function updateMessage() {
            const percentageLeft = (totalSeconds / (originalMinutes * 60)) * 100;
            if (percentageLeft > 66) {
                messageDisplay.textContent = "You're doing great. Total concentration.";
            } else if (percentageLeft > 10) {
                messageDisplay.textContent = "Is that social media calling your name? Ignore it.";
            } else {
                messageDisplay.textContent = "Almost there. Prepare for... your reward.";
            }
        }
        
        function resetUI() {
            // Switch visibility back to the setup screen
            timerContainerDiv.classList.add('hidden');
            setupDiv.classList.remove('hidden');
            messageDisplay.textContent = ""; // Clear the message
        }

        // --- 4. EVENT LISTENER ---
        startBtn.addEventListener('click', () => {
            originalMinutes = parseInt(minutesInput.value);

            // Basic validation
            if (isNaN(originalMinutes) || originalMinutes <= 0) {
                alert("Please enter a valid number of minutes.");
                return;
            }

            totalSeconds = originalMinutes * 60;

            // Switch UI visibility
            setupDiv.classList.add('hidden');
            timerContainerDiv.classList.remove('hidden');

            // Start the countdown
            updateTimer(); // Call once immediately to show the initial time
            timerInterval = setInterval(updateTimer, 1000);
        });

    </script>
</body>
</html>